<% counter = 0 %>
<% hash = collection_grid_check(collection) %>
<% items_in_row = hash[:items_in_row] %>
<% partial_to_render = hash[:partial_to_render] %>

<% collection.each_with_index do |item, index| %>
  <% if counter == 0 %>
    <div class="row">
  <% end %>

  <%= render partial: partial_to_render, locals: { item: item } %>
  <% counter += 1 %>

  <% if counter == items_in_row || (index + 1) == collection.count %>
    </div><!--/.row-->
    <% counter = 0 %>
  <% end %>
<% end %>
